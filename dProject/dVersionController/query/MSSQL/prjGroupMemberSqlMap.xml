<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="prjGroupMemberSqlMap">
	<select id="getPrjGroupMemberList" resultType="PrjGroupMemberVO" parameterType="PrjGroupMemberVO">
		select * from p_prj_group_member a join p_users b on a.user_id=b.user_id where prj_id=#{prj_id} and group_id=#{group_id} order by a.user_id asc
    </select>
	<select id="isUserPrjGroupMember" resultType="int" parameterType="PrjGroupMemberVO">
		select count(*) from p_prj_group_member where prj_id=#{prj_id} and group_id=#{group_id} and user_id=#{user_id}
    </select>
	<delete id="deletePrjGroupMember" parameterType="PrjGroupMemberVO">
		delete from p_prj_group_member
		where prj_id=#{prj_id} and group_id=#{group_id} and user_id=#{user_id}
    </delete>
	<delete id="deletePrjGroupMemberAll" parameterType="PrjGroupMemberVO">
		delete from p_prj_group_member
		where prj_id=#{prj_id} and group_id=#{group_id}
    </delete>
	<insert id="insertPrjGroupMember" parameterType="PrjGroupMemberVO">
		insert into p_prj_group_member(prj_id,group_id,user_id,group_desc,reg_id,reg_date)
		values(#{prj_id},#{group_id},#{user_id},(select set_desc from p_prj_code_settings where prj_id=#{prj_id} and set_code_type='GROUP MEMBER' and set_code_feature='V' and set_code_id=#{group_id}),#{reg_id},#{reg_date})
    </insert>
</mapper>