<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="drnReviewConclusionSqlMap">

<select id="drnRgetCodeList" parameterType="PrjCodeSettingsVO" resultType="PrjCodeSettingsVO">
	select *
	from p_prj_code_settings
	where prj_id = #{prj_id}
	and set_code_type = #{set_code_type}
</select>

<select id="drnRgetCode" parameterType="PrjCodeSettingsVO" resultType="PrjCodeSettingsVO">
	select *
	from p_prj_code_settings
	where prj_id = #{prj_id}
	and set_code_type = #{set_code_type}
</select>

<insert id="drnRgetCodeInsert" parameterType="PrjCodeSettingsVO">
	insert into p_prj_code_settings (prj_id,set_code_type,set_code_id,set_code_feature,set_code,set_desc,reg_id,reg_date)
	values(#{prj_id},
		#{set_code_type},
		(select ISNULL(FORMAT(MAX(CONVERT(INT,set_code_id))+1,'00000'),'00001') from p_prj_code_settings where prj_id=#{prj_id} and set_code_type=#{set_code_type}),
		'V',
		'RC',
		#{set_desc},
		#{reg_id},
		#{reg_date})
</insert>

<update id="drnRgetCodeUp" parameterType="PrjCodeSettingsVO">
	update p_prj_code_settings
	set set_desc = #{set_desc},
		mod_id = #{mod_id},
		mod_date = #{mod_date}
	where prj_id = #{prj_id}
	and set_code_type = #{set_code_type}
</update>

<insert id="drnRCopyCode" parameterType="PrjCodeSettingsVO">
	insert into p_prj_code_settings (prj_id,set_code_type,set_code_id,set_code_feature,set_code,set_desc,set_val,set_order,set_val2,set_val3,set_val4,ifc_yn,reg_id,reg_date,mod_id,mod_date)
	Select #{prj_id} as prj_id ,set_code_type,set_code_id,set_code_feature,set_code,set_desc,set_val,set_order,set_val2,set_val3,set_val4,ifc_yn,reg_id,reg_date,mod_id,mod_date
		FROM p_prj_code_settings
		where prj_id = #{copy_prj_id} and
		set_code_type = #{set_code_type}
</insert>

<select id="drnRchkDesc" parameterType="PrjCodeSettingsVO" resultType="PrjCodeSettingsVO">
	select set_desc
	from p_prj_code_settings
	where prj_id = #{copy_prj_id}
	and set_code_type = #{set_code_type}
</select>

</mapper>