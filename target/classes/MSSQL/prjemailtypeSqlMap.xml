<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="prjemailtypeSqlMap">
	<select id="getPrjEmailTypeAll" resultType="PrjEmailTypeVO" parameterType="PrjEmailTypeVO">
		select * from p_prj_email_type where prj_id=#{prj_id} order by email_feature,email_type_id asc
    </select>
	<select id="getPrjEmailType" resultType="PrjEmailTypeVO" parameterType="PrjEmailTypeVO">
		select * from p_prj_email_type where prj_id=#{prj_id} and email_feature=#{email_feature} order by email_type_id asc
    </select>
    <insert id="insertPrjEmailType" parameterType="PrjEmailTypeVO">
    	insert into p_prj_email_type(prj_id,email_type_id,email_type,email_feature,email_desc,email_auto_send_yn,reg_id,reg_date)
    	values(#{prj_id},(SELECT ISNULL(FORMAT((SELECT CONVERT(INT,(SELECT max(email_type_id) from p_prj_email_type where prj_id=#{prj_id}))+1) ,'D5'),'00001')),#{email_type},#{email_feature},#{email_desc},#{email_auto_send_yn},#{reg_id},#{reg_date})
    </insert>
    <delete id="deletePrjEmailType" parameterType="PrjEmailTypeVO">
    	delete from p_prj_email_type
    	where prj_id=#{prj_id} and email_type_id=#{email_type_id}
    </delete>
    <select id="getEmailAutoSendYN" parameterType="PrjEmailTypeVO" resultType="String">
    	select email_auto_send_yn from p_prj_email_type
    	where prj_id=#{prj_id} and email_type_id=#{email_type_id}
    </select>
	<select id="selectEmailType" resultType="PrjEmailTypeVO" parameterType="PrjEmailTypeVO">
		select email_type_id,email_desc from p_prj_email_type where prj_id=#{prj_id} and email_type=#{email_type} and email_feature=#{email_feature}
    </select>
    <update id="updatePrjEmailType" parameterType="PrjEmailTypeVO">
    	update p_prj_email_type
    	set email_type=#{email_type},
    		email_feature=#{email_feature},
    		email_desc=#{email_desc},
    		email_auto_send_yn=#{email_auto_send_yn},
    		mod_id=#{mod_id},
    		mod_date=#{mod_date}
    	where prj_id=#{prj_id} and email_type_id=#{email_type_id}
    </update>
</mapper>